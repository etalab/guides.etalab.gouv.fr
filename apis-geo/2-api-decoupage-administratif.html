<!DOCTYPE html>
<html lang="fr-FR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API d√©coupage administratif | guides.etalab.gouv.fr</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/images/favicon.png">
    <meta name="description" content="Les guides d'Etalab : vous accompagner dans la r√©alisation de vos projets relatifs aux donn√©es, algorithmes et codes sources.">
    <link rel="preload" href="/assets/css/0.styles.067cb4b5.css" as="style"><link rel="preload" href="/assets/js/app.2d968e25.js" as="script"><link rel="preload" href="/assets/js/2.c7a6e61f.js" as="script"><link rel="preload" href="/assets/js/34.cdc4836a.js" as="script"><link rel="prefetch" href="/assets/js/10.2930becd.js"><link rel="prefetch" href="/assets/js/11.fe4599e7.js"><link rel="prefetch" href="/assets/js/12.24fa0a80.js"><link rel="prefetch" href="/assets/js/13.9417dddf.js"><link rel="prefetch" href="/assets/js/14.11bbc3c9.js"><link rel="prefetch" href="/assets/js/15.b86b4acc.js"><link rel="prefetch" href="/assets/js/16.c8977046.js"><link rel="prefetch" href="/assets/js/17.8fafbbae.js"><link rel="prefetch" href="/assets/js/18.ecb12b34.js"><link rel="prefetch" href="/assets/js/19.fd337a64.js"><link rel="prefetch" href="/assets/js/20.c3c71a7d.js"><link rel="prefetch" href="/assets/js/21.adae2c70.js"><link rel="prefetch" href="/assets/js/22.b4be4a5e.js"><link rel="prefetch" href="/assets/js/23.01cf3b8a.js"><link rel="prefetch" href="/assets/js/24.9b26d610.js"><link rel="prefetch" href="/assets/js/25.43a05225.js"><link rel="prefetch" href="/assets/js/26.3599a67f.js"><link rel="prefetch" href="/assets/js/27.48e0890c.js"><link rel="prefetch" href="/assets/js/28.21070389.js"><link rel="prefetch" href="/assets/js/29.192a701e.js"><link rel="prefetch" href="/assets/js/3.d21d7d4e.js"><link rel="prefetch" href="/assets/js/30.9290dd8b.js"><link rel="prefetch" href="/assets/js/31.1d8b0769.js"><link rel="prefetch" href="/assets/js/32.acb25757.js"><link rel="prefetch" href="/assets/js/33.33f63db5.js"><link rel="prefetch" href="/assets/js/35.dfe97740.js"><link rel="prefetch" href="/assets/js/36.59ffdc16.js"><link rel="prefetch" href="/assets/js/37.e008b980.js"><link rel="prefetch" href="/assets/js/38.fefee1e8.js"><link rel="prefetch" href="/assets/js/39.d722a5e6.js"><link rel="prefetch" href="/assets/js/4.71b55c0f.js"><link rel="prefetch" href="/assets/js/40.40282705.js"><link rel="prefetch" href="/assets/js/41.46aa0cc4.js"><link rel="prefetch" href="/assets/js/42.9b7f14b8.js"><link rel="prefetch" href="/assets/js/43.d452a041.js"><link rel="prefetch" href="/assets/js/44.f7a95844.js"><link rel="prefetch" href="/assets/js/45.70b4abe0.js"><link rel="prefetch" href="/assets/js/46.c0f35329.js"><link rel="prefetch" href="/assets/js/47.bc91a0be.js"><link rel="prefetch" href="/assets/js/48.6dff9c98.js"><link rel="prefetch" href="/assets/js/49.db6a376a.js"><link rel="prefetch" href="/assets/js/5.f3356606.js"><link rel="prefetch" href="/assets/js/50.6f05baf1.js"><link rel="prefetch" href="/assets/js/51.92b81ccc.js"><link rel="prefetch" href="/assets/js/52.25241806.js"><link rel="prefetch" href="/assets/js/53.2ed4a115.js"><link rel="prefetch" href="/assets/js/54.8da38b19.js"><link rel="prefetch" href="/assets/js/55.b8a020fa.js"><link rel="prefetch" href="/assets/js/56.6528e11f.js"><link rel="prefetch" href="/assets/js/57.ee919747.js"><link rel="prefetch" href="/assets/js/58.19c14471.js"><link rel="prefetch" href="/assets/js/59.97a1930a.js"><link rel="prefetch" href="/assets/js/6.5c76a76c.js"><link rel="prefetch" href="/assets/js/60.15346f90.js"><link rel="prefetch" href="/assets/js/61.c9b5b314.js"><link rel="prefetch" href="/assets/js/62.391e671f.js"><link rel="prefetch" href="/assets/js/7.377cf6ea.js"><link rel="prefetch" href="/assets/js/8.9148c140.js"><link rel="prefetch" href="/assets/js/9.f0a11729.js">
    <link rel="stylesheet" href="/assets/css/0.styles.067cb4b5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo-marianne.svg" alt="guides.etalab.gouv.fr" class="logo"> <span class="site-name can-hide">guides.etalab.gouv.fr</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accueil.html" class="nav-link">
  üìö Sommaire
</a></div><div class="nav-item"><a href="https://guides.data.gouv.fr/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  üí° D√©couvrir nos nouveaux guides
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.etalab.gouv.fr/contact" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ‚úâÔ∏è Contacter Etalab
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://support.data.gouv.fr/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ‚úâÔ∏è Contacter data.gouv.fr
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/etalab/guides.etalab.gouv.fr" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code source
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accueil.html" class="nav-link">
  üìö Sommaire
</a></div><div class="nav-item"><a href="https://guides.data.gouv.fr/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  üí° D√©couvrir nos nouveaux guides
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://www.etalab.gouv.fr/contact" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ‚úâÔ∏è Contacter Etalab
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://support.data.gouv.fr/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ‚úâÔ∏è Contacter data.gouv.fr
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/etalab/guides.etalab.gouv.fr" target="_blank" rel="noopener noreferrer" class="repo-link">
    Code source
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/apis-geo/" class="sidebar-link">Introduction</a></li><li><a href="/apis-geo/1-api-adresse.html" class="sidebar-link">API Adresse</a></li><li><a href="/apis-geo/2-api-decoupage-administratif.html" class="active sidebar-link">API d√©coupage administratif</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/apis-geo/2-api-decoupage-administratif.html#pourquoi-utiliser-l-api-decoupage-administratif" class="sidebar-link">Pourquoi utiliser l‚ÄôAPI d√©coupage administratif ?</a></li><li class="sidebar-sub-header"><a href="/apis-geo/2-api-decoupage-administratif.html#utilisation-de-l-api-dans-un-site-web" class="sidebar-link">Utilisation de l'API dans un site web</a></li><li class="sidebar-sub-header"><a href="/apis-geo/2-api-decoupage-administratif.html#rappels-des-exemples-officiels" class="sidebar-link">Rappels des exemples officiels</a></li><li class="sidebar-sub-header"><a href="/apis-geo/2-api-decoupage-administratif.html#les-sources-alternatives-pour-les-communes" class="sidebar-link">Les sources alternatives pour les communes</a></li><li class="sidebar-sub-header"><a href="/apis-geo/2-api-decoupage-administratif.html#faq" class="sidebar-link">FAQ</a></li></ul></li><li><a href="/apis-geo/3-tuiles-vecteur.html" class="sidebar-link">Tuiles vectorielles</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="api-decoupage-administratif"><a href="#api-decoupage-administratif" class="header-anchor">#</a> API d√©coupage administratif</h1> <h2 id="pourquoi-utiliser-l-api-decoupage-administratif"><a href="#pourquoi-utiliser-l-api-decoupage-administratif" class="header-anchor">#</a> Pourquoi utiliser l‚ÄôAPI d√©coupage administratif ?</h2> <p>L‚ÄôAPI d√©coupage administratif permet d‚Äôobtenir des donn√©es administratives fran√ßaise comme :</p> <ul><li>√† des √©chelles diff√©rentes (communes, d√©partements, r√©gions),</li> <li>des ann√©es diff√©rentes (notion de mill√©sime)</li></ul> <p>L'API D√©coupage Administratif est principalement destin√©e √† un besoin de recherches pour des formulaires en partant du nom de la commune, du code postal ou bien du code INSEE.</p> <p>Les usages d√©partements ou r√©gions bien que pratiquent semblent moins int√©ressant car les donn√©es ne changent quasiment jamais dans le temps et le nombre limit√©s d'√©l√©ments fait qu'il est possible de g√©rer ces informations c√¥t√© client.</p> <h2 id="utilisation-de-l-api-dans-un-site-web"><a href="#utilisation-de-l-api-dans-un-site-web" class="header-anchor">#</a> Utilisation de l'API dans un site web</h2> <p>L‚ÄôAPI est tr√®s utile pour permettre de faire <strong>l'auto-compl√©tion</strong> qu‚Äôil s‚Äôagisse d‚Äôun formulaire ou pour permettre de zoomer sur une commune trouv√©e dans un contexte web</p> <ul><li><a href="http://bl.ocks.org/ThomasG77/0b99013795f76699c5c9a0d7daf4411e" target="_blank" rel="noopener noreferrer">http://bl.ocks.org/ThomasG77/0b99013795f76699c5c9a0d7daf4411e<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>La partie importante se base sur un simple <a href="https://developer.mozilla.org/fr/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer">Fetch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Il est aussi possible de <a href="https://medium.com/@ThomasG77/api-et-g%C3%A9ocodage-dans-libre-office-calc-488ab78dc360" target="_blank" rel="noopener noreferrer">remplir les informations de coordonn√©es dans un tableur comme Libre Office<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="rappels-des-exemples-officiels"><a href="#rappels-des-exemples-officiels" class="header-anchor">#</a> Rappels des exemples officiels</h2> <p>Nous pr√©sentons ici les exemples les plus courants. Pour des usages plus sp√©cifiques, vous pouvez utiliser <a href="https://geo.api.gouv.fr/decoupage-administratif" target="_blank" rel="noopener noreferrer">les exemples de la documentation officielle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="utilisation-de-l-api-pour-recuperer-des-communes"><a href="#utilisation-de-l-api-pour-recuperer-des-communes" class="header-anchor">#</a> Utilisation de l‚ÄôAPI pour r√©cup√©rer des communes</h3> <ul><li>Recherche par code postal <a href="https://geo.api.gouv.fr/communes?codePostal=78000" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?codePostal=78000<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Recherche par code INSEE <a href="https://geo.api.gouv.fr/communes?code=44109" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?code=44109<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Recherche par nom <a href="https://geo.api.gouv.fr/communes?nom=Nantes&amp;boost=population&amp;limit=5" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?nom=Nantes&amp;boost=population&amp;limit=5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (on ajoute un boost par population pour que la plus grand commune soit privil√©gi√©e)</li> <li>Par coordonn√©es <a href="https://geo.api.gouv.fr/communes?lat=47.0482944&amp;lon=-1.1501568" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?lat=47.0482944&amp;lon=-1.1501568<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Filtrer par d√©partement pour √©viter les probl√®mes li√©s √† l'homonymie de commune, par exemple la commune de Saint-Aubin existe dans les d√©partements 10, 21, 36, 39, 40, 47, 59, 62, 91 et 02 <a href="https://geo.api.gouv.fr/communes?nom=Saint-Aubin&amp;codeDepartement=21" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?nom=Saint-Aubin&amp;codeDepartement=21<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Obtenir toutes les communes d'un d√©partement <a href="https://geo.api.gouv.fr/departements/44/communes" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/departements/44/communes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Obtenir toutes les communes d'une r√©gion <a href="https://geo.api.gouv.fr/communes?codeRegion=84" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?codeRegion=84<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Tous les exemples ci-dessus ne filtrent pas les champs, ne permettent pas de choisir si on veut des g√©om√©tries pour les communes: soit le centre, au sens math√©matique, de la commune, soit son contour, ni ne permettent pas le choix de la s√©rialisation: pour la cartographie, g√©n√©ralement, on utilise un JSON sp√©cifique dit GeoJSON pour cela.</p> <p>La meilleure mani√®re de comprendre comment cela fonctionne est d'utiliser <a href="https://geo.api.gouv.fr/decoupage-administratif/communes#advanced" target="_blank" rel="noopener noreferrer">la d√©mo recherche avanc√©e de la documentation officielle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Elle permet en cochant de voir comment l'URL d'appel change en particulier l'option <code>fields</code> pour ne retourner que les colonnes/champs n√©cessaires.</p> <p><strong>Ce qu'il faut retenir pour les aspects g√©o,</strong></p> <ul><li>si vous souhaitez les GeoJSON avec le centre de la commune, rajoutez aux urls de la premi√®re partie <code>&amp;format=geojson&amp;geometry=centre</code> si votre URL contient d√©j√† un <code>?</code> sinon il faut ajouter plut√¥t <code>?format=geojson&amp;geometry=centre</code></li> <li>si vous souhaitez les GeoJSON avec le contour de la commune, rajoutez aux urls de la premi√®re partie <code>&amp;format=geojson&amp;geometry=contour</code> si votre URL contient d√©j√† un <code>?</code> sinon il faut ajouter plut√¥t <code>?format=geojson&amp;geometry=contour</code></li></ul> <p>Un exemple pour illustrer</p> <p><a href="https://geo.api.gouv.fr/communes?lat=47.0482944&amp;lon=-1.1501568" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?lat=47.0482944&amp;lon=-1.1501568<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>devient :</p> <ul><li>Si l‚Äôon souhaite le centre de la commune : <a href="https://geo.api.gouv.fr/communes?lat=47.0482944&amp;lon=-1.1501568&amp;format=geojson&amp;geometry=centre" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?lat=47.0482944&amp;lon=-1.1501568&amp;format=geojson&amp;geometry=centre<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Si l‚Äôon souhaite le contour de la commune :  <a href="https://geo.api.gouv.fr/communes?lat=47.0482944&amp;lon=-1.1501568&amp;format=geojson&amp;geometry=contour" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?lat=47.0482944&amp;lon=-1.1501568&amp;format=geojson&amp;geometry=contour<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Il faut √©galement penser √† mettre en cache quand on a des appels lourds qui ne changent pas ou qu'on retourne des contours. Ainsi :</p> <ul><li>Sans contour, la r√©ponse fait 480Ko <a href="https://geo.api.gouv.fr/communes?codeRegion=84" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?codeRegion=84<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Avec contour, la r√©ponse fait 34Mo <a href="https://geo.api.gouv.fr/communes?codeRegion=84&amp;format=geojson&amp;geometry=contour" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/communes?codeRegion=84&amp;format=geojson&amp;geometry=contour<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Vous pouvez tr√®s bien sauvegarder dans un fichier le r√©sultat des URLs ci-dessus car le r√©sultat ne va pas changer en permanence car ce n'est pas de l'autocompl√©tion.</p> <h3 id="utilisation-de-l-api-pour-recuperer-des-regions-et-des-departements"><a href="#utilisation-de-l-api-pour-recuperer-des-regions-et-des-departements" class="header-anchor">#</a> Utilisation de l‚ÄôAPI pour r√©cup√©rer des r√©gions et des d√©partements</h3> <p>Dans ce cas de figure, le principal int√©r√™t est la correspondance entre un nom et un code.</p> <p>Si l‚Äôon souhaite le code d'un d√©partement ou d'une r√©gion, on prend :</p> <ul><li>pour la r√©gion <a href="https://geo.api.gouv.fr/regions?nom=Auvergne" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/regions?nom=Auvergne<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>pour le d√©partement <a href="https://geo.api.gouv.fr/departements?nom=Loire%20Atl" target="_blank" rel="noopener noreferrer">https://geo.api.gouv.fr/departements?nom=Loire Atl<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Les cas d√©partements et r√©gions fonctionnent comme les communes et changent tr√®s rarement. Il est souvent envisageable d'avoir les fichiers globaux JSON plut√¥t que passer par des appels API. On a ainsi sous forme JSON (sans g√©om√©trie):</p> <ul><li><a href="https://unpkg.com/@etalab/decoupage-administratif/data/departements.json" target="_blank" rel="noopener noreferrer">Les d√©partements<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://unpkg.com/@etalab/decoupage-administratif/data/regions.json" target="_blank" rel="noopener noreferrer">Les r√©gions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="les-sources-alternatives-pour-les-communes"><a href="#les-sources-alternatives-pour-les-communes" class="header-anchor">#</a> Les sources alternatives pour les communes</h2> <h3 id="utiliser-le-wfs-de-l-ign"><a href="#utiliser-le-wfs-de-l-ign" class="header-anchor">#</a> Utiliser le WFS de l'IGN</h3> <p>Un <a href="https://fr.wikipedia.org/wiki/Web_Feature_Service" target="_blank" rel="noopener noreferrer">WFS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (Web Feature Service) est un service web d‚Äôinspiration <a href="https://fr.wikipedia.org/wiki/SOAP" target="_blank" rel="noopener noreferrer">SOAP<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Il est bas√© sur une approche en <a href="https://fr.wikipedia.org/wiki/Extensible_Markup_Language" target="_blank" rel="noopener noreferrer">XML<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Le WFS de l‚ÄôIGN existe en version 1.0.0, 1.1.0 et 2.0.0.
Cette derni√®re rajoute des facilit√©s en particulier pour paginer les appels. G√©n√©ralement, sauf si le serveur est tr√®s ancien, c'est la version 2.0.0 qu'il faut privil√©gier.</p> <p>M√™me s'il est possible de retrouver comment fonctionne le WFS en regardant le <a href="https://www.ogc.org/standards/wfs" target="_blank" rel="noopener noreferrer">standard WFS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, nous vous recommandons plut√¥t d'aller sur <a href="https://georezo.net/wiki/main/standards/wfs" target="_blank" rel="noopener noreferrer">la page WFS du site GeoRezo.net<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Ce n'est pas un pr√©requis ici mais pourra vous aider √† approfondir le sujet si vous devez utiliser ce standard plus r√©guli√®rement.</p> <p>Si vous avez besoin de r√©cup√©rer toutes les communes, il est plut√¥t recommand√© de r√©cup√©rer les donn√©es brutes depuis <a href="https://geoservices.ign.fr/adminexpress" target="_blank" rel="noopener noreferrer">Admin Express<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, document√© aussi sur cette page. Nous vous recommandons d'avoir install√© <a href="https://gdal.org/" target="_blank" rel="noopener noreferrer">GDAL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, un utilitaire en ligne de commande.</p> <p>Son principal int√©r√™t est de pallier √† certains sc√©narios que n'adresse pas pour le moment l'API D√©coupage Administratif. Il n√©cessite de comprendre quelques pr√©alables.</p> <h4 id="lister-les-couches-d-un-endpoint-wfs"><a href="#lister-les-couches-d-un-endpoint-wfs" class="header-anchor">#</a> Lister les couches d'un endpoint WFS</h4> <p>On doit pouvoir lister les couches du service fournissant les communes</p> <p><em>Dans le navigateur, peu lisible car XML avec un &quot;GetCapabilities&quot;</em></p> <p><a href="https://wxs.ign.fr/administratif/geoportail/wfs/?SERVICE=WFS&amp;REQUEST=GetCapabilities&amp;VERSION=2.0.0" target="_blank" rel="noopener noreferrer">https://wxs.ign.fr/administratif/geoportail/wfs/?SERVICE=WFS&amp;REQUEST=GetCapabilities&amp;VERSION=2.0.0<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><em>Avec GDAL</em></p> <div class="language- extra-class"><pre class="language-text"><code>ogrinfo -so WFS:https://wxs.ign.fr/administratif/geoportail/wfs
</code></pre></div><p>Astuce: recommencez avec l'option <code>--DEBUG ON</code> comme ci-dessous</p> <div class="language- extra-class"><pre class="language-text"><code>ogrinfo --DEBUG ON -so WFS:https://wxs.ign.fr/administratif/geoportail/wfs
</code></pre></div><p>L'int√©r√™t de la manoeuvre est de pouvoir comprendre les appels HTTP utilis√©s lors de l'usage du WFS plut√¥t que devoir apprendre la sp√©cification WFS.</p> <h4 id="trouver-la-structure-du-wfs"><a href="#trouver-la-structure-du-wfs" class="header-anchor">#</a> Trouver la structure du WFS</h4> <p>Trouver la structure du WFS est important car pour pouvoir filtrer, vous pouvez soit utiliser des filtres qui jouent sur les attributs soit sur des propri√©t√©s spatiales. Il s‚Äôagit donc de conna√Ætre le nom des champs. Il s‚Äôagit √©galement potentiellement de connaitre le nom de la colonne contenant la g√©om√©trie pour pouvoir effectuer les requ√™tes spatiales.</p> <p>On part dans cet exemple de la couche <code>ADMINEXPRESS-COG.LATEST:commune</code></p> <p>Dans le navigateur, copiez l'URL :</p> <p><a href="https://wxs.ign.fr/administratif/geoportail/wfs/?SERVICE=WFS&amp;REQUEST=DescribeFeatureType&amp;VERSION=2.0.0&amp;TYPENAMES=ADMINEXPRESS-COG.LATEST:commune&amp;outputFormat=application/json" target="_blank" rel="noopener noreferrer">https://wxs.ign.fr/administratif/geoportail/wfs/?SERVICE=WFS&amp;REQUEST=DescribeFeatureType&amp;VERSION=2.0.0&amp;TYPENAMES=ADMINEXPRESS-COG.LATEST:commune&amp;outputFormat=application/json<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Avec GDAL, en ligne de commande</p> <div class="language- extra-class"><pre class="language-text"><code>ogrinfo -so -noextent WFS:https://wxs.ign.fr/administratif/geoportail/wfs &quot;ADMINEXPRESS-COG.LATEST:commune&quot;
</code></pre></div><p>Dans les 2 cas, on sait quelles sont les colonnes disponibles. On pourra r√©utiliser leur nom pour faire des filtres ou choisir les colonnes qui seront retourn√©es.</p> <h4 id="usages-du-wfs"><a href="#usages-du-wfs" class="header-anchor">#</a> Usages du WFS</h4> <p>Nous avons appris quelles couches contiennent un WFS, quelle est la structure d'une couche comme ses noms de champs. Maintenant on va pouvoir consommer la couche pour la filtrer.</p> <p>Il est possible de le faire via un appel √† une URL ou en passant pas des utilitaires associ√©s √† GDAL, utiles pour notre besoin:</p> <ul><li>le premier <code>ogrinfo</code> permet d'inspecter le contenu d'une source de donn√©es, dans ce cas particulier, un WFS.</li> <li>le second <code>ogr2ogr</code> permet de consommer le WFS en utilisant si n√©cessaire la pagination et surtout de transformer le GML dans d'autres formats g√©ographiques comme le SHP (Shapefile), le GPKG (Geopackage), le GeoJSON, le CSV parmi les formats g√©ospatiaux les plus courants.</li></ul> <p>Parmi les cas r√©guli√®rement demand√©, il nous est demand√© de r√©pondre √† des besoins de multi-filtrage, par exemple si on veut les communes de plusieurs r√©gions ou d√©partements.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Filtrer les communes pour plusieurs d√©partements en retournant un GeoJSON</span>
ogr2ogr -f GeoJSON communes-44-35.geojson <span class="token punctuation">\</span>
        --config OGR_WFS_PAGING_ALLOWED ON <span class="token punctuation">\</span>
        --config OGR_WFS_PAGE_SIZE <span class="token number">250</span> <span class="token punctuation">\</span>
        WFS:https://wxs.ign.fr/administratif/geoportail/wfs <span class="token punctuation">\</span>
        -sql <span class="token string">&quot;SELECT * FROM <span class="token entity" title="\&quot;">\&quot;</span>ADMINEXPRESS-COG.LATEST:commune<span class="token entity" title="\&quot;">\&quot;</span> WHERE insee_dep IN ('44', '35')&quot;</span> <span class="token punctuation">\</span>
        -lco <span class="token assign-left variable">RFC7946</span><span class="token operator">=</span>YES
</code></pre></div><p>Nous vous proposons des recettes ci-dessous. La majorit√© n'utilise que les communes mais nous employons ponctuellement les EPCI, ayant parfois des demandes pour adresser comment les r√©cup√©rer ou r√©cup√©rer leurs communes</p> <p>On peut dans une premier temps r√©cup√©rer la commune qui a un code INSEE car elle contient aussi le SIRET de l'EPCI.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Obtenir la commune par code commune INSEE sous forme CSV</span>
ogr2ogr -f CSV commune-44109.csv WFS:https://wxs.ign.fr/administratif/geoportail/wfs -sql <span class="token string">&quot;SELECT * FROM <span class="token entity" title="\&quot;">\&quot;</span>ADMINEXPRESS-COG.LATEST:commune<span class="token entity" title="\&quot;">\&quot;</span> WHERE insee_com = '44109'&quot;</span>
</code></pre></div><p>En inspectant le fichier epci-with-44109-from-geom.csv, on voit que le code SIREN est <code>244400404</code>. On peut ainsi retourner les communes qui sont membres de l'EPCI.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Obtenir les communes de l'EPCI gr√¢ce au code Siren de l'EPCI</span>
ogr2ogr -f GeoJSON communes-epci-with-44109.geojson WFS:https://wxs.ign.fr/administratif/geoportail/wfs -sql <span class="token string">&quot;SELECT * FROM <span class="token entity" title="\&quot;">\&quot;</span>ADMINEXPRESS-COG.LATEST:commune<span class="token entity" title="\&quot;">\&quot;</span> WHERE siren_epci = '244400404'&quot;</span>
</code></pre></div><p>On pourrait aussi obtenir la commune qui contient le point de longitude -1.54241 et latitude 47.21791 sous forme CSV puis depuis le code SIREN, faire la m√™me op√©ration que ci-dessus.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ogr2ogr -f CSV commune-44109-from-geom.csv WFS:https://wxs.ign.fr/administratif/geoportail/wfs -sql <span class="token string">&quot;SELECT * FROM <span class="token entity" title="\&quot;">\&quot;</span>ADMINEXPRESS-COG.LATEST:commune<span class="token entity" title="\&quot;">\&quot;</span> WHERE ST_Contains(ST_GeomFromText('POINT(-1.54241 47.21791)', 'EPSG:4326'), the_geom)&quot;</span> -lco <span class="token assign-left variable">RFC7946</span><span class="token operator">=</span>YES
</code></pre></div><p>Il est possible aussi d'obtenir l'EPCI lui-m√™me:</p> <p>depuis un code SIREN :</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ogr2ogr -f GeoJSON epci-with-44109-from-siren.geojson WFS:https://wxs.ign.fr/administratif/geoportail/wfs -sql <span class="token string">&quot;SELECT * FROM <span class="token entity" title="\&quot;">\&quot;</span>ADMINEXPRESS-COG.LATEST:epci<span class="token entity" title="\&quot;">\&quot;</span> WHERE code_siren = '244400404'&quot;</span>
</code></pre></div><p>depuis un point qui est est contenu dans l'EPCI :</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ogr2ogr -f GeoJSON epci-with-44109-from-geom.geojson WFS:https://wxs.ign.fr/administratif/geoportail/wfs -sql <span class="token string">&quot;SELECT * FROM <span class="token entity" title="\&quot;">\&quot;</span>ADMINEXPRESS-COG.LATEST:epci<span class="token entity" title="\&quot;">\&quot;</span> WHERE ST_Contains(ST_GeomFromText('POINT(-1.54241 47.21791)', 'EPSG:4326'), the_geom)&quot;</span>
</code></pre></div><p><strong>Faq WFS</strong></p> <ul><li>Pourquoi ne pas passer par le WFS pour de l'autocompl√©tion? Parce que cela demeure nettement plus lent qu'une API d√©di√©e car il n'y a pas d'index sp√©cifiques pour cet usage.</li></ul> <h3 id="passer-par-les-fichiers-admin-express"><a href="#passer-par-les-fichiers-admin-express" class="header-anchor">#</a> Passer par les fichiers Admin Express</h3> <p>Quand on a besoin de travailler avec les donn√©es France enti√®re et qu'on a un back-end, c'est la solution √† privil√©gier.</p> <h4 id="contexte"><a href="#contexte" class="header-anchor">#</a> Contexte</h4> <p>Historiquement, il existait un produit nomm√© Geofla pour avoir les communes qui a √©t√© depuis remplac√© par un nouveau jeu de donn√©es dit Admin Express qui contient les donn√©es suivantes :</p> <ul><li>DEPARTEMENT (Polygon)</li> <li>COMMUNE_ASSOCIEE_OU_DELEGUEE (Polygon)</li> <li>COMMUNE (Polygon)</li> <li>COLLECTIVITE_TERRITORIALE (Polygon)</li> <li>ARRONDISSEMENT_MUNICIPAL (Polygon)</li> <li>EPCI (Polygon)</li> <li>REGION (Polygon)</li> <li>CANTON (Polygon)</li> <li>CHFLIEU_COMMUNE_ASSOCIEE_OU_DELEGUEE (Point)</li> <li>CHFLIEU_COMMUNE (Point)</li> <li>CHFLIEU_ARRONDISSEMENT_MUNICIPAL (Point)</li> <li>ARRONDISSEMENT (Polygon)</li></ul> <p>Le jeu de donn√©es et la documentation officielle sont disponible <a href="https://geoservices.ign.fr/adminexpress" target="_blank" rel="noopener noreferrer">la page officielle Admin Express<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h4 id="differents-produits-admin-express"><a href="#differents-produits-admin-express" class="header-anchor">#</a> Diff√©rents produits Admin Express</h4> <p>Il existe des <strong>diff√©rences entre les produits Admin Express</strong>, nous vous invitons √† consulter cet <a href="https://geoservices.ign.fr/admin-express-passe-la-grande-echelle" target="_blank" rel="noopener noreferrer">article r√©sumant ces diff√©rences<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Ce qu'il faut retenir pour choisir les produits:</p> <ul><li>Si vous avez besoin de suivre l'√©volution des communes par mois, prendre &quot;Admin Express&quot; simple.</li> <li>Si vous voulez faire des cartes th√©matiques qui utilisent les donn√©es INSEE, prenez les donn√©es &quot;Admin Express COG Carto&quot; qui sont g√©n√©ralis√©es c'est √† dire avec moins de points pour les contours.</li> <li>Si vous avez besoin de compter par exemple les commerces qui sont dans une commune mais aussi de faire des cartes th√©matiques, prenez plut√¥t &quot;Admin Express COG&quot; car les coordonn√©es sont plus pr√©cises.</li></ul> <h4 id="le-piege-des-projections"><a href="#le-piege-des-projections" class="header-anchor">#</a> Le &quot;pi√®ge&quot; des projections</h4> <p>L'autre pi√®ge lors de la r√©cup√©ration de ces donn√©es est de prendre les donn√©es dans les &quot;bonnes projections&quot;: il existe des jeux de donn√©es dont la description mentionne &quot;par territoire&quot; et &quot;France enti√®re&quot;. Pour comprendre, en empruntant des raccourcis, il faut savoir que la France utilise ce qu'on appelle des syst√®mes de projection officiels qui d√©finissent comment &quot;bien placer les coordonn√©es mesur√©es&quot;. Ces syst√®mes sont choisis pour pouvoir garder une grande pr√©cision de mesure qui permettent ensuite d'√™tre s√ªr de l'emplacement de votre maison au centim√®tre pr√®s. L'inconv√©nient est qu'ils fonctionnent sur des √©tendues faibles: ils sont diff√©rents sur la m√©tropole et sur les DOM. Si vous prenez les donn√©es &quot;par territoire&quot;, vous r√©cup√©rerez les donn√©es pour chaque territoire s√©par√©ment avec chacun sa projection officielle. Si vous prenez France enti√®re, vous aurez les donn√©es assembl√©es dans une projection mondiale ind√©pendamment des territoires.</p> <p>Conclusion √† tirer sur les projections des donn√©es:</p> <ul><li>si vous devez travailler sur France m√©tropolitaine et DOM, vous pouvez prendre les donn√©es &quot;France enti√®re&quot;</li> <li>Si vous travaillez uniquement sur un DOM ou uniquement la m√©tropole, vous pourrez travailler tant avec les donn√©es &quot;par territoire&quot; que &quot;France enti√®re&quot;</li></ul> <h2 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h2> <h3 id="bon-a-savoir-concernant-les-communes"><a href="#bon-a-savoir-concernant-les-communes" class="header-anchor">#</a> Bon √† savoir concernant les communes</h3> <ul><li><a href="https://twitter.com/JulesGrandin/status/1448563444601532422" target="_blank" rel="noopener noreferrer">La longueur des noms de commune peut √™tre probl√©matique<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li><a href="https://www.collectivites-locales.gouv.fr/sites/default/files/Accueil/Notes" target="_blank" rel="noopener noreferrer">Il existe une normalisation des noms de communes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li>Il existe des communes homonymes, le nom n'est donc pas un identifiant fiable.</li> <li>Le code postal ne correspond pas √† toujours √† une seule commune.</li> <li>Certaines communes ont plusieurs codes postaux.</li> <li>Le code postal peut contenir le code d'un autre d√©partement que son d√©partement r√©el.</li></ul> <h3 id="bonnes-pratiques-a-adopter"><a href="#bonnes-pratiques-a-adopter" class="header-anchor">#</a> Bonnes pratiques √† adopter</h3> <p>Partout o√π vous le pouvez, utilisez le code INSEE du COG (Code Offficiel G√©ographique) plut√¥t qu'un code postal ou un nom. Celui-ci est le plus fiable dans le temps m√™me si des cas particuliers emergent parfois suite aux √©volutions des communes (fusions ou s√©paration).</p> <p>Avec l'API D√©coupage Administratif, cette complexit√© du COG est cach√©e. Si vous avez des besoins avanc√©s, vous pouvez utiliser soit <a href="https://www.insee.fr/fr/information/2560452" target="_blank" rel="noopener noreferrer">les fichiers du COG<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> soit pour une recherche ponctuel, passer par <a href="https://www.insee.fr/fr/recherche/recherche-geographique?debut=0" target="_blank" rel="noopener noreferrer">l'interface de recherche de commune<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/etalab/guides.etalab.gouv.fr/edit/master/apis-geo/2-api-decoupage-administratif.md" target="_blank" rel="noopener noreferrer">Proposer des modifications sur cette page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/apis-geo/1-api-adresse.html" class="prev">
        API Adresse
      </a></span> <span class="next"><a href="/apis-geo/3-tuiles-vecteur.html">
        Tuiles vectorielles
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2d968e25.js" defer></script><script src="/assets/js/2.c7a6e61f.js" defer></script><script src="/assets/js/34.cdc4836a.js" defer></script>
  </body>
</html>
